# Keycloak OIDC Configuration Sample
# Copy this file to .env and fill in your actual values
# 
# NOTE: This configuration requires openid-client@5.x (not v6.x)
# The project uses CommonJS which is only supported by v5.x

# Server Configuration
SERVER_PORT=3001

#
# Server configuration for HTTPS
# Set the port number to match your deployment config (default HTTPS is 443)
# Provide the key and cert files for your HTTPS certificate
#
# To generate a DEVELOPMENT certificate and key, use the following command:
# openssl req -x509 -newkey rsa:4096 -keyout server.key.pem -out server.cert.pem -days 3650
#
# To generate a PRODUCTION certificate, use a proper signed cert, for instance at let's encrypt.
#
# DEVELOPMENT ONLY : To disable SSL completely, set the SERVER_SSL_ENABLED parameter to false
#
SERVER_SSL_ENABLED=false
SERVER_SSL_KEY_FILE=sll_key.pem
SERVER_SSL_CERT_FILE=ssl_cert.pem
NODE_TLS_REJECT_UNAUTHORIZED="0"


# Web UI Configuration
WEBUI_HOME_DIR=../client/dist

# Database Configuration (your existing PostgreSQL settings)
DB_DIALECT=postgres
DB_NAME=kdolist
DB_HOSTNAME=localhost
DB_PORT=5432
DB_USER=dbuser
DB_PASSWORD=supersecret

# JWT Authentication
AUTH_SECRET=your-super-secret-jwt-key-change-this-in-production
AUTH_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
AUTH_TOKEN_EXPIRATION_TIME=1h

# Session Configuration
SESSION_SECRET=your-session-secret-key-change-this-in-production

# Keycloak OIDC Configuration
# The Keycloak issuer URL typically follows this format:
# http://{keycloak-host}:{port}/realms/{realm-name}
# Example: http://localhost:8080/realms/kdolist
KEYCLOAK_ISSUER_URL=http://localhost:8080/realms/kdolist

# The client ID you created in Keycloak
KEYCLOAK_CLIENT_ID=kdolist-client

# The client secret from Keycloak (if using confidential client)
# Leave empty if using public client
KEYCLOAK_CLIENT_SECRET=your-keycloak-client-secret

# The redirect URI that Keycloak will callback to after authentication
# This should match the redirect URI configured in your Keycloak client
# Example: http://localhost:3001/api/v1/auth/keycloak/callback
KEYCLOAK_REDIRECT_URI=http://localhost:3001/api/v1/auth/keycloak/callback

# Client Application URL (where to redirect after successful authentication)
# When serving both API and client from the same server, set this to the same URL as the server
# For separate development servers (client on 3000, server on 3001), use the client URL
# For production (serving from same server), use empty or same server URL
CLIENT_URL=http://localhost:3001
